<!Doctype html>
<html> 
    <head>
        <meta charset="UTF-8">
        <link type="text/css" rel="stylesheet" href="basic.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="shortcut icon" href="goatIcon.png">
        <head>
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>/
  var header = $('body');

var backgrounds = new Array(
    'url(http://placekitten.com/100)'
  , 'url(http://placekitten.com/200)'
  , 'url(http://placekitten.com/300)'
  , 'url(http://placekitten.com/400)'
);

var current = 0;

function nextBackground() {
    current++;
    current = current % backgrounds.length;
    header.css('background-image', backgrounds[current]);
}
setInterval(nextBackground, 1000);

header.css('background-image', backgrounds[0]);
</script>

  <link rel="stylesheet" href="animate.min.css">
</head>



        <script src="main.js"></script>

        <title> Goativate Yourself</title> 
    </head>
    <body>
        <div id="fb-root"></div>
        <script>            
            // Import Facebook API
              window.fbAsyncInit = function() {
                FB.init({
                  appId      : '161413351026984',
                  xfbml      : true,
                  version    : 'v2.8'
                });
                FB.AppEvents.logPageView();
              };

              (function(d, s, id) {
                  var js, fjs = d.getElementsByTagName(s)[0];
                  if (d.getElementById(id)) return;
                  js = d.createElement(s); js.id = id;
                  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=161413351026984";
                  fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
        
            // Check Login status
            
           
        </script>
        <div style="position: absolute; left: 15px; top: 20px;"> 
            <a class = "cta" href="#">
                <img class = "goat" src="sheep.png" id="feed-button" width="50" height="50" onclick="DoSomething();" />
            </a>
        </div>
        <div style="position: absolute; left: 30px; top: 120px;"> 
            <a class="brocoli" href="#">
                <img class = "broco" src = "broccoli.png" width="50" height="50" onclick = "DoSomething();"/>
            </a>
        </div>
        <div class = "header">
            
            <nav>
                <ul class = "primary_nav" style="list-style: none;">
                    <li class = "flink"><a id="friends-button" class="semi-transparent-button" href = "#">Friends</a></li>
                    <li class = "plink"><a id="profile-button" class="semi-transparent-button" href = "#">Profile</a></li>

                </ul>
            </nav>
        </div>
        <div class="title">
            GOAT FOR YOUR GOALS            
        </div>

        
        <img class="centerImage" src="goatvector.svg">

        <div id="foodholder" class="semi-transparent-button"><p id = "food"></p></div>
  <script type = "text/javascript" src = "https://sdk.clarifai.com/js/clarifai-latest.js"></script>
  <script>
	var newArrayList = [];
	var addArray = function(dat1,dat2,dat3){
		newArrayList.push(dat1);
		newArrayList.push(dat2);
		newArrayList.push(dat3);
	}
    //Declare the API app
    var app = new Clarifai.App(
      'vCRFLQr0J3sK95zJa4_mIS8Fgn82ryazO68-grVz',
      'xS__z6S1DGFWx-Ep0cNmaqo7S6CWKZYM9nq80nda'
    );
    //Function called when button is pressed
	var levelIndex = 5;
	var LEVELS = [];
		for (var i = 0; i < 17; i ++){
			var stringArray = 'levels/'+i+'.png';
			LEVELS.push(stringArray);
		}
    var run = function (imgURL){
    var image="";
    image+=imgURL;
    //Check for images
    app.models.predict(Clarifai.FOOD_MODEL,image).then(
    function(response) {
    // do something with response of image tag
    document.getElementById("food").innerHTML = response.rawData.outputs[0].data.concepts;
    document.getElementById("food").innerHTML = response.rawData.outputs[0].data.concepts[0].name;
    growGoat(response.rawData.outputs[0].data.concepts[0].name);
	},
    function(err) {
    // there was an error if image was not found
    document.getElementById("food").innerHTML = "Image Not Found :(";
    }
  );
  }
  	var growGoat(current){
		var levelBackground = '';
		levelBackground = getLevel(current);
		document.body.style.backgroundImage = "url(levelBackground)";
	}
		var getLevel=function(current){
	
		boolean isTrue = false;
		for (var j = 0; j < newArrayList.length; j ++){
			if (current == newArrayList[j]){
				if (levelIndex < 10){
					levelIndex += 1;
				}
				return LEVELS[levelIndex];
			}
		}
		if (levelIndex > 0){
			levelIndex -= 1;
		}
		return LEVELS[levelIndex];
	}
  </script>



<!-- friends Modal -->
<div id="friends-modal" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
            <!--- friend list -->
<link href="http://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
<div class="container bootstrap snippet">
  <div class="header">
    <h3 class="text-muted prj-name">
        <span class="fa fa-users fa-2x principal-title"></span>
    </h3>
  </div>

  <div class="jumbotron list-content">
    <ul class="list-group">
      <li href="#" class="list-group-item title">
        Your Herd
      </li>
      <li href="#" class="list-group-item text-left">
        <img class="img-thumbnail" src="http://bootdey.com/img/Content/User_for_snippets.png">
        <label class="name">
            Billy McBeard<br>
        </label>
        <label class="pull-right">
            <a  class="btn btn-success btn-xs glyphicon glyphicon-ok" href="#" title="View"></a>
            <a  class="btn btn-danger  btn-xs glyphicon glyphicon-trash" href="#" title="Delete"></a>
            <a  class="btn btn-info  btn-xs glyphicon glyphicon glyphicon-comment" href="#" title="Send message"></a>
        </label>
        <div class="break"></div>
      </li>
      <li href="#" class="list-group-item text-left">
          <img class="img-thumbnail"  src="http://bootdey.com/img/Content/user_1.jpg">
        <label class="name">
          Bucky Cloven
        </label>
        <label class="pull-right">
            <a  class="btn btn-success btn-xs glyphicon glyphicon-ok" href="#" title="View"></a>
            <a  class="btn btn-danger  btn-xs glyphicon glyphicon-trash" href="#" title="Delete"></a>
            <a  class="btn btn-info  btn-xs glyphicon glyphicon glyphicon-comment" href="#" title="Send message"></a>
        </label>
        <div class="break"></div>
      </li>
      <li href="#" class="list-group-item text-left">
          <img class="img-thumbnail"  src="http://bootdey.com/img/Content/user_2.jpg">
          <label class="name">
            Baaahrbara Kid
          </label>
        <label class="pull-right">
            <a  class="btn btn-success btn-xs glyphicon glyphicon-ok" href="#" title="View"></a>
            <a  class="btn btn-danger  btn-xs glyphicon glyphicon-trash" href="#" title="Delete"></a>
            <a  class="btn btn-info  btn-xs glyphicon glyphicon glyphicon-comment" href="#" title="Send message"></a>
        </label>
        <div class="break"></div>
      </li>
      <li href="#" class="list-group-item text-left">
        <a class="btn btn-block btn-primary">
            <i class="glyphicon glyphicon-refresh"></i>
            Load more...
        </a>
      </li>
    </ul>
  </div>
  </div>
</div>
  </div>


<div id="profile-modal" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
  <div class="modal-header">
    <span class="close1">&times;</span>
    <h2>Edit your diet</h2>
  </div>
  <form>
  Enter food 1:<br>
  <input type="text" id="food1" name="food1"><br>
  Enter food 2:<br>
  <input type="text" id="food2" name="food2"><br>
  Enter food 3:<br>
  <input type="text" id="food3" name="food3"><br>
  </form>
  <div href="#" class="list-group-item text-left">
        <button id="enter-food" class="btn btn-block btn-primary" onclick="addArray(document.getElementById('food1').value,document.getElementById('food2').value, document.getElementById('food3').value)">
            Enter!
        </button>
      </div>
  </div>
</div>


<div id="feed-modal" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
  <div class="modal-header">
    <span class="close2">&times;</span>
    <h2>Feed your goat!</h2>
  </div>
  <form>
  What did you eat today?<br>
  <input type="text" id="imgurl" placeholder="Image URL"/><br>
  </form>
  <div href="#" class="list-group-item text-left">
        <button id="image-button" onclick="run(document.getElementById('imgurl').value)" class="btn btn-block btn-primary">
            Enter!
        </button>
  </div>
  </div>
</div>


        <br></br>
        <br>
        <!--- Facebook Login button -->
        <div class="fb-login-button" data-width="200" data-max-rows="1000" data-size="xlarge" data-show-faces="false" data-auto-logout-link="false" scope="public_profile" onlogin="checkLoginState();"></div>
    
    <br></br>
        <br>
        <br>
        <div
          class="fb-like"
          data-share="true"
          data-width="450"
          data-show-faces="true">
        </div>
<br></br>
        <br>
        <br><br></br>
        <br>
        <?php
			session_start();
			if(empty($_SESSION['visited']){
				$counter = file_get_contents('/indexhits.txt') + 1;
				file_put_contents('/indexhits.txt', $counter);
			}
			$_SESSION['visited'] = TRUE;
		?>
        
        <script>
        // Get the modal
var modal = document.getElementById('friends-modal');

// Get the button that opens the modal
var btn = document.getElementById("friends-button");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}


        // Get the modal
var modal1 = document.getElementById('profile-modal');

// Get the button that opens the modal
var btn1 = document.getElementById("profile-button");

// Get the <span> element that closes the modal
var span1 = document.getElementsByClassName("close1")[0];

// When the user clicks on the button, open the modal 
btn1.onclick = function() {
    modal1.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span1.onclick = function() {
    modal1.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal1) {
        modal1.style.display = "none";
    }
}


        // Get the modal
var modal2 = document.getElementById('feed-modal');

// Get the button that opens the modal
var btn2 = document.getElementById("feed-button");

// Get the <span> element that closes the modal
var span2 = document.getElementsByClassName("close2")[0];

// When the user clicks on the button, open the modal 
btn2.onclick = function() {
    modal2.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span2.onclick = function() {
    modal2.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal2) {
        modal2.style.display = "none";
    }
}

</script>
    </body>
</html>     